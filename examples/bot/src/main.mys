from argparse import Parser
from discord import Message
from discord.client import Client
from discord.client import Handler

class MyHandler(Handler):

    def on_message(self, message: Message, client: Client):
        print(message)

        if message.author.name == client.user.name:
            return

        if message.content == "!ping":
            message.channel.send("pong")

def main(argv: [string]):
    parser = Parser("bot")
    parser.add_positional("bot_token")
    args = parser.parse(argv)

    client = Client(MyHandler())
    client.run(args.value_of("bot_token"))
